<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.prime.com.tr/ui">

<h:head>
	<title>Home - Feed Manager App</title>
	<link type="text/css" rel="stylesheet" href="#{facesContext.externalContext.requestContextPath}/css/redmond/skin.css" />
	<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  	<script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
 	<script>
 	$(function() {
 	    $( "#accordion" ).accordion({
 	      collapsible: true
 	    });
 	  });
	</script>
</h:head>
<h:body>
	<h:form>
			<h:outputText value="Bem Vindo! #{userSession.user.username}" /><br />
			<h:commandButton value="Logout!" action="#{authenticator.logout}" />
	</h:form>
	<br />	
	<h:form>
		<h1>Assinar Feed</h1>
		<h:panelGrid columns="2">   		
		     	
				      	<h:outputLabel value="Link do feed" />
		     			<h:inputText value="#{userBean.urlFeed}" style="width:500px"/>
										
		</h:panelGrid>
					
		<br />	
		
		<h:commandButton value="Assinar" action="#{userBean.assinarFeed}"/>
		<h:messages />
	</h:form>
	
	<br />
	<br />
	<h2>Feeds cadastrados</h2>
	<h:form>
		<ui:repeat var="feed" value="#{userBean.userUrls}">
		<li>#{feed.url}<h:commandLink value="Cancelar Assinatura" action="#{userBean.cancelarFeed(feed.url)}"/></li>
		</ui:repeat>
	</h:form>
	
	<br />
	<br />

<h2>Noticias</h2>
<div id="accordion">
 <ui:repeat var="feed" value="#{userBean.feeds}">
	<h3>#{feed.title}</h3>
	<div>
    <p>
   		#{feed.description}
    </p>
  </div>
</ui:repeat>
</div>
</h:body>
</html>